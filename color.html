<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600,700,900' rel='stylesheet' type='text/css'>

<link rel="stylesheet" type="text/css" href="css/dynamic_header.css">
<link rel="stylesheet" type="text/css" href="css/work.css">
<link rel="stylesheet" type="text/css" href="css/footer.css">
<script src="https://code.jquery.com/jquery-1.11.3.js"></script>
<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>


</head>
<body>
	<div id="color-me" class="color-me" style="width:100%; height:100%; background-color:hsl(0,100%,50%);display:block;position:absolute;overflow:hidden;">
	</div>
</body>


<script type="text/javascript">

	var compassdir;
	var roundcompassdir;
	console.log(9);

	var lightness;
	var roundlightness;

	var fingerdown;
	fingerdown = 0;

    window.addEventListener('deviceorientation',  handleOrientation, true);

	function handleOrientation(event) {
  // Listen for the deviceorientation event and handle the raw data

	    var compassdir;
	    var roundcompassdir;

	    	var lightness;
			var roundlightness;

			lightness = event.beta;
			roundlightness = Math.round(lightness);

			

	    if(event.webkitCompassHeading) {

	      // Apple works only with this, alpha doesn't work
	      compassdir = event.webkitCompassHeading;  
	      roundcompassdir = Math.round(compassdir);

	      if (fingerdown === 0) {

	      $('#color-me').css('background-color','hsl('+roundcompassdir+',100%,50%)');
	      
	      console.log("done");

		  }

	   

		    if ($("#color-me").on("vmousedown",function(){

		    	fingerdown = 1

				console.log("tap11");
				console.log(roundlightness);

		 		$('#color-me').css('background-color','hsl('+roundcompassdir+',100%,'+roundlightness+'%)');


		 		console.log("done-lighttoo");

			})
				);

			 }

	    else compassdir = event.alpha; 
	}
		$("#color-me").on("vmouseup",function(){

			fingerdown = 0

		});


	
    

  </script>
</html>